{% load leaflet_tags %}
{% load static %}
  <head>
    {% leaflet_css %}
	<style>
		.leaflet-container{
			/* all maps */
			width: 100%;
			height: 100%;
		}
	</style>
	<script type="text/javascript">
	function map_init_basic (map) {
		var realtime = L.realtime({
			url: 'http://localhost:8000/map/live.geojson/',
			crossOrigin: true,
			type: 'json'
		}, {
			interval: 3 * 1000,
			pointToLayer: function (feature, latlng) {
				return L.marker(latlng, {
					'icon': L.icon({
						iconUrl: '{% static "farmstar_map/Tractor-Blue_rot.png" %}',
						shadowUrl: '//leafletjs.com/docs/images/leaf-shadow.png',
						iconSize:     [38, 95], // size of the icon
						shadowSize:   [50, 64], // size of the shadow
						iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
						shadowAnchor: [4, 62],  // the same for the shadow
						popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
					})
				});
			}
		}).addTo(map);
	}
	</script>
  </head>
  <body>
  	{% leaflet_js %}
    {% leaflet_map "map" callback="window.map_init_basic"%}
	{% leaflet_js plugins="realtime" %}
  </body>

