{% load leaflet_tags %}
  <head>
    {% leaflet_css %}
	<style>
		.leaflet-container{
			/* all maps */
			width: 100%;
			height: 100%;
		}
	</style>
	<script type="text/javascript">
		function map_init_basic (map) {
			var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
				attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
				});
			var Thunderforest_SpinalMap = L.tileLayer('https://{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey={apikey}', {
				attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
				apikey: 'f3c091cec3774ba09449b56941e327f9',
				});
			var CartoDB_DarkMatter = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
				subdomains: 'abcd',
			});
			var OpenWeatherMap_Temp = L.tileLayer('http://{s}.tile.openweathermap.org/map/wind/{z}/{x}/{y}.png?appid={apiKey}', {
				attribution: 'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',
				apiKey: '13f9d5354454a0632eb68b10f9f7e0a1',
				opacity: 0.5
			});
			realtime = L.realtime('http://localhost:8000/map/live.geojson/', {interval:10  * 1000}).addTo(map);
			realtime.on('update', function() {
				map.fitBounds(realtime.getBounds(), {maxZoom: 15});
			});
			var baseMaps = {"ESRI":Esri_WorldImagery, "Thunder Forrest":Thunderforest_SpinalMap, "DarkMatter":CartoDB_DarkMatter, "Wind": OpenWeatherMap_Temp};
			L.control.layers(baseMaps).addTo(map);
		}
	</script>
  </head>
  <body>
  	{% leaflet_js %}
    {% leaflet_map "map" callback="window.map_init_basic"%}
	{% leaflet_js plugins="realtime" %}
  </body>

